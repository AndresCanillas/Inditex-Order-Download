@page
@inject ILocalizationService g
@inject IAppConfig cfg
@{
    Layout = null;
    var showMaintenanceScreen = !User.IsInRole(Roles.SysAdmin) && cfg["DownloadServicesWeb:MaintenanceMode"] == "true";
    var canManageImages = User.IsInRole(Roles.IDTLabelDesign) || User.IsInRole(Roles.SysAdmin);
}
/// # sourceURL=https://Pages/HomeView.js
/// <reference path="/js/jquery-3.0.0.min.js" />
/// <reference path="/js/Kendo.all.min.js" />
/// <reference path="/js/AppContext.js" />

//<script>
	var HomeView = function () {
		FormView.Extend(this, "@g["PrintEntry Orders"]", "/HomeView");
	};


	HomeView.prototype = {
		constructor: HomeView,

	OnLoad: async function () {
		@if (!showMaintenanceScreen)
		{
			@:this.elements.VMenu.MenuOptionClicked.Subscribe(this, this.HandleVMenuEvent);
		}

		@if (canManageImages)
		{
			@:var view = await AppContext.ViewManager.Load("/ImageManagement/ImageManagementView.js");
		}
		@else
		{
			@:var view = await AppContext.ViewManager.Load("/Orders/GetOrdersDialog.js");
		}
		view.Show(this.elements.mainContainer);
	},

	HandleVMenuEvent: async function (self, ev) {
		switch (ev.option) {
			case "ImageManagement":
				var view = await AppContext.ViewManager.Load("/ImageManagement/ImageManagementView.js");
				view.Show(self.elements.mainContainer);
				break;
			case "Orders":
			default:
				var view = await AppContext.ViewManager.Load("/Orders/GetOrdersDialog.js");
				view.Show(self.elements.mainContainer);
				break;
		}
	},

		OnUnload: function () {
			console.log("HomeView Unload");
		}
	};
//</script>
