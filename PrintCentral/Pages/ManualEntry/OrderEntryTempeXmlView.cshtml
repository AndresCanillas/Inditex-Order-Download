@page
@inject ILocalizationService g
@inject ICompanyRepository repo
@inject IUserData  userData
@inject IOrderRepository  orderRepo
@inject IProjectRepository projectRepo
@inject IEventQueue events
@{
    Layout = null;
    int n = 0;

    if(Request.Query.ContainsKey("n"))
    {
        n = Convert.ToInt32(Request.Query["n"]);
    }

    List<ICompany> companies = new List<ICompany>();
    companies.Add(repo.GetSelectedCompany());


}

<style>
    .upload-file:hover {
        cursor: pointer; /* Cambia el cursor al estilo "pointer" (mano) */
    }
</style>
    <form name="dataentry-frm" method="post" onsubmit="return false;">
    <viewform>
        <div id="Search-Box">
            <viewcard>

                <viewrow>
                    <viewcolumn>
                        <div style="margin:auto; width:450px;">
                            <input id="xmlFile" name="files" type="file" accept=".xml" action="change:UploadFile" class="form-control" />
                        </div>
                    </viewcolumn>
                </viewrow>

            </viewcard>

        </div>


        <div id="Success-Box" style="display:none" >
            <viewcard>

                <viewrow>
                    <viewcolumn>
                        <div style="margin:auto;">
                           <h3>@g["The file was loaded successfully. Please complete the order information"]</h3>
                        </div>
                    </viewcolumn>
                </viewrow>

            </viewcard>

        </div>
        <div id="tempeForm" style="display:none">
            <viewcard>
                <viewrow>
                    <viewcolumn>
                        <select model class="combodisabled" name="CompanyID" label="@g["Company"]:" action="change:CompanyChanged" options="@(OptionList.FromEnumerable(companies, "ID", "Name", null))"></select>
                        <select model class="combodisabled" name="BrandID" label="*@g["Brand"]:" validation="required" action="change:LoadSeasons" type="int"></select>
                        <select model class="combodisabled" name="SeasonID" label="*@g["Season"]:" validation="required" action="change:LoadCatalogs" type="int"></select>
                        <input type="text" model name="OrderNumber" label="*@g["Order Number"]:" action="blur:LoadSizesEvt" validation="required" autocomplete="off" />
                        <input type="text" model name="SubFamily" label="@g["Sub Familly"]:" autocomplete="off" />
                        <select model class="combodisabled" name="SectionID" label="@g["Section"]" autocomplete="off">
                            <option value="1">@g["Caballero - Man"]</option>
                            <option value="2">@g["Señora - Woman"]</option>
                            <option value="3">@g["Niño - Kid"]</option>
                        </select>
                        <select model class="combodisabled" name="SectionSymbolID" label="@g["Section Symbol"]" autocomplete="off">
                            <option value="WOMAN">@g["WOMAN"]</option>
                            <option value="BASIC">@g["BASIC"]</option>
                            <option value="TRF">@g["TRAFALUC"]</option>
                            <option value="MAN">@g["MAN"]</option>
                            <option value="BOY">@g["KIDS BOY"]</option>
                            <option value="GIRL">@g["KIDS GIRL"]</option>
                            <option value="BABY GIRL">@g["BABY GIRL"]</option>
                            <option value="BABY BOY">@g["BABY BOY"]</option>
                            <option value="MINI">@g["MINI"]</option>
                            <option value="VESTIR">@g["VESTIR"]</option>
                            <option value="SPORT">@g["SPORT"]</option>

                        </select>
                        <div class="form-group row">
                            <div class="col-sm col-form-label">
                                <span>*@g["Provider"]:</span>
                            </div>
                            <div class="col-sm-8">
                                <div class="input-group mb-3">
                                    <select model name="ProviderReference" class="form-control form-control-sm" no-transform action="change:SetProviderCompanyID" validation="required" type="text"></select>
                                    <div class="input-group-append" style="height: 31px;">
                                        <span class="input-group-text" class="form-control form-control-sm" style="cursor:pointer"><span style="margin-left: 10px;"><a href="#" title="@g["Refresh"]" action="RefreshProvider"><span class="fa fa-refresh"></span></a></span></span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group row">
                            <div class="col-sm col-form-label">
                                <span>*@g["Country Destination"]:</span>
                            </div>
                            <div class="col-sm-8">
                                <div class="input-group mb-3">
                                    <select model name="CountryDestination" class="form-control form-control-sm" no-transform action="change:SetCountryDestinationID" validation="required" type="text"></select>
                                </div>
                            </div>
                        </div>


                    </viewcolumn>
                    <viewcolumn>
                        <viewrow>

                            <viewcolumn>
                                <input model name="Pvp1" label="@g["PVP1 EUROPE SOUTH (UP)"]" validation="" class="form-control form-control-sm" />
                            </viewcolumn>
                            <viewcolumn>
                                <input list="currency-options" type="text" model name="Currency1" label="@g["Currency"]:" validation="maxlen(5);" class="form-control form-control-sm" style="min-width:auto;max-width: 80px;" autocomplete="off" />
                                     <datalist id="currency-options"   >
                                        <option value="€"> </option>
                                        <option value="US $"> </option>
                                        <option value="UK £"> </option>
                                        <option value="CLP$"> </option>
                                        <option value="AUD$"> </option>
                                        <option value="R$"> </option>

                                       </datalist>
                            </viewcolumn>

                        </viewrow>

                        <viewrow>
                            <viewcolumn>
                                 <input model name="Pvp2" label="@g["PVP2 EUROPE NORTH (DOWN)"]" validation="" class="form-control form-control-sm" />
                            </viewcolumn>
                            <viewcolumn>
                                    <input list="currency-options" type="text" model name="Currency2" label="@g["Currency"]:" validation="maxlen(5);" class="form-control" style="min-width:auto;max-width: 80px;" autocomplete="off" />
                            </viewcolumn>
                        </viewrow>
                        <viewrow>
                            <viewcolumn>
                               <input model name="Pvp3" label="@g["PVP3 NEW HANGTAG PRICES USD"]" validation="" class="form-control form-control-sm" />
                            </viewcolumn>
                            <viewcolumn>
                                    <input list="currency-options" type="text" model name="Currency3" label="@g["Currency"]:" validation="maxlen(5);" class="form-control" style="min-width:auto;max-width: 80px;" autocomplete="off" />
                            </viewcolumn>

                        </viewrow>
                        <viewrow>
                            <viewcolumn>
                                <input model name="Pvp4" label="@g["PVP4 UK"]" validation="" class="form-control form-control-sm" />        
                            </viewcolumn>
                            <viewcolumn>
                                 <input list="currency-options" type="text" model name="Currency4" label="@g["Currency"]:" validation="maxlen(5);" class="form-control" style="min-width:auto;max-width: 80px;" autocomplete="off" />
                            </viewcolumn>
                        </viewrow>
                        <viewrow>
                            <viewcolumn>
                                <p style="color:#495057">@g["Price must contain a comma, at least one digit before comma and must have exactly 2 decimal digits after comma"] </p>
                            </viewcolumn>
                        </viewrow>
                    </viewcolumn>


                </viewrow>
                <viewrow>
                    <viewcolumn>
                        <div style="font-size:17px;">@g["Articles"]</div>
                        <hr class="subtitle" />
                        <div name="ByArticleElement" class="input-group input-group-sm">
                            <div class="input-group-prepend">
                                <span class="input-group-text">@g["Search article"]:</span>
                            </div>
                            <input model name="ArticleToAdd" no-transform action="keypress:HandleKeyPress" list="ArticleList" type="text" class="form-control" />
                            <div class="input-group-append">
                                <span class="input-group-text" style="cursor:pointer"><span class="fa fa-plus" action="AddArticle"></span><span style="margin-left: 10px;"><a href="#" title="@g["Refresh"]" action="RefreshArticle"><span class="fa fa-refresh"></span></a></span></span>
                            </div>
                        </div>
                        <datalist id="ArticleList" name="ArticleList"></datalist>
                        <div class="toolbar-body" style="width:100%; margin-top:15px;">
                            <span class="toolbar-grip"></span>
                            <a href="#" title="@g["Remove"]" action="RemoveArticle"><span class="fa fa-trash"></span></a>
                        </div>
                        <div component="GridView" name="ArticlesGrid" style="width:100%; height:150px;">
                            <template>
                                <column width="80" field="ArticleID">@g["ArticleID"]</column>
                                <column width="120" field="Name">@g["Name"]</column>
                                <column width="100" field="ArticleCode">@g["Article Code"]</column>
                                <column width="100" field="LabelID">@g["LabelID"]</column>
                                <column width="100" field="PackCode">@g["PackCode"]</column>
                            </template>
                        </div>
                    </viewcolumn>
                    <viewcolumn>
                    <div style="font-size:17px;">@g["Sizes"]</div>
                    <hr class="subtitle" />
                    <select model name="SizeSetID"  action="change:LoadSizes" style="visibility:hidden"></select>

                    <div class="order-groups-grid">
                        <div class="toolbar-body" style="width:100%; margin-top:15px;">
                            <span class="toolbar-grip"></span>
                            <a href="#" title="@g["New"]" action="AddRowSize"><span class="fa fa-plus"></span></a>
                            <span class="toolbar-separator"></span>
                            <a href="#" title="@g["Remove"]" action="RemoveSizes"><span class="fa fa-trash"></span></a>
                        </div>
                        <div component="GridView" name="SizeGrid" style="width:100%; max-height:50vh;" rowcssclass="GridViewSetRowCssClass">
                            <template>
                                <column width="80" editable="True" field="ColorCode">@g["Color code"]</column>
                                <column width="120" editable="True" field="Size">@g["Size"]</column>
                                <column width="120" editable="True" field="Equivalencia">@g["Equivalencia"]</column>
                                <column width="100" editable="True"  field="Quantity">@g["Quantity"]</column>
                            </template>

                        </div>
                        <br />
                        <div component="GridView" name="ChinaGrid" style="width:100%; max-height:50vh;" rowcssclass="GridViewSetRowCssClass"></div>
                        <div name="instructions" style="display:none">
                        </div>
                    </div>
                    </viewcolumn>
                </viewrow>
                <viewfooter>

                    <div class="row justify-content-end" name="AvailableActions">
                        <div class="col-4 text-center">
                            @*   <a href="#" class="btn btn-sm btn-outline-primary" action="Save"> <span class="fa fa-fw fa-save" aria-hidden="true"></span> @g["Save"]</a> *@
                        </div>
                        <div class="col-4 text-right">
                            <a href="#" class="btn btn-sm btn-primary" action="SaveAndNext">@g["Save And Next"] <span class="fa fa-fw fa-chevron-right" aria-hidden="true"></span></a>
                        </div>
                    </div>

                </viewfooter>

            </viewcard>
        </div>
         

        </viewform>
    </form>