@page
@inject ILocalizationService g
@inject IUserData userData
@{
    Layout = null;
}

//# sourceURL=https://Pages/Admin/Orders/ChangeOrderStatusView.js
/// <reference path="/js/jquery-3.0.0.min.js" />
/// <reference path="/js/AppContext.js" />
/// <reference path="/js/AppContext.AppDomain.js" />

//  <script>
    @* orderData is a CompanyOrderDTO  *@
    var ConfirmContinueOrderView = function (orderSelection) {
        FormView.Extend(this, "@g["Confirm to continue selected order(s)"]", "/Admin/Orders/ConfirmContinueOrderView")

        this.OrderSelection = orderSelection;

        this.Accepted = false;
    }


    ConfirmContinueOrderView.prototype = {

        constructor: ConfirmContinueOrderView,

        OnLoad: function () {
            var self = this;

            self.EnableSubmit();

            //self.elements.OrderNumber.text(self.OrderData.OrderNumber)

        },


        Save: function () {
            var self = this;
            
            AppContext.Orders.ContinueByGroup(self.OrderSelection)
            .done((response) => {
                if (response.Success == false) {
                    //AppContext.ShowError('@g["Try Again, cannot continue order"]')
                    // keep in confirm window
                    return;
                }

                self.Close(response);
            })

        },

        IsEnableSubmit: function () {
            return this.Accepted;
        },

        ClickConfirm: function () {
            var self = this;

            self.Accepted = self.elements.Confirm.prop('checked');

            self.EnableSubmit();
        },


        EnableSubmit: function () {

            var self = this;

            var btn = self.elements.SubmitButton;

            if (self.IsEnableSubmit()) {
                //btn.prop('disabled', false);
                btn.removeClass('disabled')
            } else {
                //btn.prop('disabled', true);
                btn.addClass('disabled')
            }

        },
    }


// </script>