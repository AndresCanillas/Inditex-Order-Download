@page
@inject ILocalizationService g
@inject IUserData  userData
@inject ICountryRepository ctrRepo

@{
    Layout = null;
}

<style>
    .labels-container {
        width:60%;
        display:grid;
        grid-template-columns: repeat(2, 1fr);
        align-items:center;
        justify-items:center;
        margin: auto; 
    }

    .label-container {
       
        width:300px;
        display: flex;
        border: 1px solid;
        height: 155px;
        background-color: #f2f2f2;
        margin:2px;
    }

    .percent-container {
        width: 35px;
        border: 1px dashed;
        text-align: left;
        font-size:13px;
        font-family: 'Arial, Helvetica, sans-serif';
    }

    .additional-container {
        width: 300px;
        /*border: 1px solid;*/
        height: 155px;
        background-color: #f2f2f2;
        margin: 2px;
        font-size:11px;
    }

    .percent {
        height: 15px;
        /*border: 1px solid;*/
    }

    .inputNumber {

        width:40px; 
        margin-right:5px;
    }

    .compo {
        /*margin: 5px;*/
        height: 15px;
        /*font-size:13px;*/
        font-family: 'Arial, Helvetica, sans-serif';
        
     /*   border: 1px solid;*/
    }
    .fiber-separator-type{
        width:40px;
    }

    .leather-fiber {
        font-family: 'SIMBOLOS CALZADO';
        font-size: 2em;
        height:25px;
    }
</style>

<form name="composition-wizard-frm" method="post"  onsubmit="return false;">
    <viewform>

        <input model name="ID" type="hidden" value="" />
        <input model name="MaxSectionsPercentage" type="hidden" />
        <input model name="KeyName" type="hidden" value="" />
        <input model name="KeyValue" type="hidden" value="" />
        <input model name="OrderID" type="hidden" value="" />
        <input model name="ProductDataID" type="hidden" value="" />
        <input model name="OrderGroupID" type="hidden" value="" />
        <input model name="OrderDataID" type="hidden" value="" />
        <input model name="CareInstructionsSorted" type="hidden" />
        <input model name="GenerateCompoText" type="hidden" value="true" />
        <viewcard>

            <viewrow style="display:none">
                <viewcolumn>
                    <!--  esta es la zona que cambia en el wizard  -->
                    
                        <h3 class="border-bottom">
                            <span name ="Title">@g["Composition"]</span>
                            <span class="text float-right ">
                                <a href="#collapseCompo" class="text-muted clearfix collapse-compo" role="button" aria-expanded="true" data-toggle="collapse" aria-controls="collapseCompo">
                                    <i class="c-open fa fa-fw fa-minus-square-o"></i>
                                    <i class="c-close fa fa-fw fa-plus-square-o"></i>
                                </a>
                            </span>
                        </h3>
                        @*<div name="EnableCompositionContainer">
                            <select name="EnableComposition" label="@g["Enable Composition"]" action="change:EnableComposition">
                                <option value="1">@g["Yes"]</option>
                                <option value="0">@g["No"]</option>
                            </select>
                        </div>*@

                </viewcolumn>
            </viewrow>

            <div id="collapseCompo" style="display:none" class="collapse show" data-toggle="collapse">
                <div name="CompoOptionsSection" class="d-none">
                    <viewrow>
                        <div class="col-sm-12">

                            <select model name="TargetArticle" label="@g["Shoes Composition Type"]" action="change:ChangeTargetArticle_Event"></select>

                        </div>
                        <div class="col-sm-12">
                            <div class="alert alert-warning" role="alert">
                                @g["After change '{0}', need to reload to recover composition storage previously", @g["Shoes Composition Type"]]
                            </div>
                        </div>
                    </viewrow>
                </div>

                <viewrow>
                    <viewcolumn>
                        <div name="Composition"></div>
                    </viewcolumn>
                   
                </viewrow>
                
                <viewrow>
                    <viewcolumn>
                        <button type="button" class="btn btn-sm btn-success float-right add-section" action="click:AddSectionEvent">@g["Add Section"] <i class="fa fa-fw fa-plus"></i></button>
                    </viewcolumn>
@*                    <viewcolumn>
                        
                    </viewcolumn>*@
                </viewrow>

            </div>



            <div name="CareInstructionsContainer" style="display:none">
                <viewrow>
                    <viewcolumn>
                        <div class="">
                            <h3 class="border-bottom">
                                @g["Care Instructions"]
                                <span class="text float-right ">
                                    <a href="#collapseWashingRules" class="text-muted clearfix  collapse-compo" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseWashingRules">
                                        <i class="c-open fa fa-fw fa-minus-square-o"></i>
                                        <i class="c-close fa fa-fw fa-plus-square-o"></i>
                                    </a>
                                </span>
                            </h3>
                        </div>
                    </viewcolumn>
                </viewrow>
                <div id="collapseWashingRules" class="collapse show" data-toggle="collapse">

                    @*<viewrow>
                        <viewcolumn>
                            <select model name="EnableWashingRules" label="@g["Enable Washing Rules"]" action="change:EnableWashingRules">
                                <option value="1">@g["Si"]</option>
                                <option value="0">@g["No"]</option>
                            </select>
                        </viewcolumn>
                    </viewrow>*@

                    <viewrow>
                        <viewcolumn>
                            <div name="WashinRules">

                                <div name="TemplatesContainer" style="display:none">
                                    <select model name="WrTemplate" action="change:FilterElements" label="@g["Templates"]:" validation="required;range(0, 1000)" />
                                </div>


                                <div name="TemplatesLeftZone">
                                    <div class="form-group row" style="margin-bottom:5px;">
                                        <label class="col-sm col-form-label">@g["Washed"]</label>
                                        <div class="input-group input-group-sm col-sm">
                                            @*<div class="input-group-append remove-section-action">
                    <span style="font-size: 43pt;width: 30px;height: 10px;font-family: 'ISO Symbol T5';position: relative;top: -28px;left: -6px;">A</span>
                </div>*@

                                            <input model id="Wash" name="UICareInstructions[0].Instruction" data-idx="1" no-transform class="form-control form-control-sm wr-code" />
                                            <input model hidden no-transform name="CareInstructions[0].Category" value="Wash" />
                                        </div>
                                    </div>

                                    <div class="form-group row" style="margin-bottom:5px;">
                                        <label class="col-sm col-form-label">@g["Bleached"]</label>
                                        <div class="input-group input-group-sm col-sm">
                                            @*<div class="input-group-append">
                    <span style="font-size: 42pt;width: 30px;height: 10px;font-family: 'ISO Symbol T5';position: relative;top: -26px;left: -5px;">K</span>
                </div>*@
                                            <input model id="Bleach" name="UICareInstructions[1].Instruction" data-idx="2" no-transform class="form-control form-control-sm wr-code" />
                                            <input model hidden no-transform name="CareInstructions[1].Category" value="Bleach" />
                                        </div>
                                    </div>

                                    

                                    <div class="form-group row" style="margin-bottom:5px;">
                                        <label class="col-sm col-form-label">@g["Drying"]</label>
                                        <div class="input-group input-group-sm col-sm">
                                            @*<div class="input-group-append">
                    <span style="font-size: 44pt;width: 30px;height: 10px;font-family: 'ISO Symbol T5';position: relative;top: -28px;left: -2px;">V</span>

                </div>*@
                                            <input id="Dry" model name="UICareInstructions[2].Instruction" data-idx="3" no-transform class="form-control form-control-sm wr-code" />
                                            <input model hidden no-transform name="CareInstructions[2].Category"  value="Dry" />

                                        </div>
                                    </div>


                                </div>
                            </div>
                        </viewcolumn>

                        <viewcolumn>

                            <div name="TemplatesRightZone">


                                <div class="form-group row" style="margin-bottom:5px;">
                                    <label class="col-sm col-form-label">@g["Ironed"]</label>
                                    <div class="input-group input-group-sm col-sm">
                                        @*<div class="input-group-append">
                    <span style="font-size: 40pt;width: 30px;height: 10px;font-family: 'ISO Symbol T5';position: relative;top: -25px;left: -7px;">O</span>
                </div>*@
                                        <input model id="Iron" name="UICareInstructions[3].Instruction" data-idx="4" no-transform class="form-control form-control-sm wr-code" />
                                        <input model hidden no-transform name="CareInstructions[3].Category" value="Iron" />
                                    </div>
                                </div>

                                <div class="form-group row" style="margin-bottom:5px;">
                                    <label class="col-sm col-form-label">@g["Dry Cleaning"]</label>
                                    <div class="input-group input-group-sm col-sm">
                                        @*<div class="input-group-append">
                    <span style="font-size: 43pt;width: 30px;height: 10px;font-family: 'ISO Symbol T5';position: relative;top: -27px;left: -3px;">S</span>
                </div>*@
                                        <input model id="DryCleaning" name="UICareInstructions[4].Instruction" data-idx="5" no-transform class="form-control form-control-sm wr-code" />
                                        <input model hidden no-transform name="CareInstructions[4].Category" value="DryCleaning" />
                                    </div>
                                </div>

                                <div class="form-group row" style="margin-bottom:5px">
                                    <label class="col-sm col-form-label">@g["Symbols"]</label>
                                    <div class="input-group input-group-sm col-sm">
                                        <div name="wsymbols"> </div>
                                    </div>
                                </div>

                            </div>
                        </viewcolumn>
                    </viewrow>
                </div>
            </div>

            <div name="AdditionlasContainer" style="display:none">
                <viewrow>
                    <viewcolumn>
                        <div class="">
                            <h3 class="border-bottom">
                                @g["Additionals"]
                                <span class="text float-right ">
                                    <a href="#collapseAdditionals" class="text-muted clearfix  collapse-compo" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseAdditionals">
                                        <i class="c-open fa fa-fw fa-minus-square-o"></i>
                                        <i class="c-close fa fa-fw fa-plus-square-o"></i>
                                    </a>
                                </span>
                            </h3>
                        </div>
                    </viewcolumn>
                </viewrow>

                <div id="collapseAdditionals" class="collapse show" data-toggle="collapse">

                    <viewrow>

                        <viewcolumn>

                            <div class="form-group row" style="margin-bottom:5px;">
                                <label class="col-sm col-form-label">@g["Add Addionals"]</label>
                                <div class="input-group input-group-sm col-sm">
                                    @*<div class="input-group-append">
            <button class="btn btn-sm btn-info mr-0"><i class="fa fa-fw fa-check"></i></button>
        </div>*@
                                    <select model id="Additionals" name="UICareInstructions[5].Instruction" data-idx="6" data-category="Additional" no-transform class="form-control form-control-sm swr-code swr-additionals"></select>
                                </div>
                            </div>


                        </viewcolumn>
                    </viewrow>

                </div>


            </div>


            <div name="ExceptionsContainer" style="display:none">
                <viewrow>
                    <viewcolumn>
                        <div class="">
                            <h3 class="border-bottom">
                                @g["Exceptions"]
                                <span class="text float-right ">
                                    <a href="#collapseExceptions" class="text-muted clearfix  collapse-compo" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseExceptions">
                                        <i class="c-open fa fa-fw fa-minus-square-o"></i>
                                        <i class="c-close fa fa-fw fa-plus-square-o"></i>
                                    </a>
                                </span>
                            </h3>
                        </div>
                    </viewcolumn>
                </viewrow>

                <div id="collapseExceptions" class="collapse show" data-toggle="collapse">

                    <viewrow>

                        <viewcolumn>
                            
                                <div class="form-group row" style="margin-bottom:5px;">
                                    <label class="col-sm col-form-label">@g["Add Exceptions"]</label>
                                    <div class="input-group input-group-sm col-sm">
                                    <select model id="Exceptions" name="UICareInstructions[6].Instruction" data-idx="7" data-category="Exception" action="change:ChangeException" no-transform class="form-control form-control-sm swr-code swr-exceptions"></select>
                                    </div>

                                </div>

                            
                        </viewcolumn>
                        <viewcolumn>
                            
                                <div class="form-group row" style="margin-bottom:5px;">
                                 <label class="col-sm col-form-label">@g["Exception Location"]</label> 
                                    <div class="input-group input-group-sm col-sm">
                                        <select model  name="ExceptionLocation" action="change:SetExceptionLocation"  no-transform class="k-input form-control form-control-sm " />
                                    </div>
                                </div>
                            
                        </viewcolumn>
                    </viewrow>
                    <viewrow>
                        <viewcolumn class="labels-form">
                            <div  class="form-group row fillingWeight" style="margin-bottom:5px;">
                               
                                <div class="input-group input-group-sm col-sm">
                                    <label class="col-sm col-form-label">@g["Filling weight"]</label>
                                    <input model name="FillingWeight" no-transform type="text" value="" class="form-control form-control-sm"/>

                                </div>
                            </div>
                        </viewcolumn>
                    </viewrow>
                </div>


            </div>




            <div id="PreviewContainer" class="collapse show" data-toggle="collapse">
                <viewrow>
                    <viewcolumn>
                        <div class="">
                            <h3 class="border-bottom">
                                @g["Text compression adjustments"]
                                <span class="text float-right ">
                                    <a href="#collapsePreview" class="text-muted clearfix  collapse-compo" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapsePreview">
                                        <i class="c-open fa fa-fw fa-minus-square-o"></i>
                                        <i class="c-close fa fa-fw fa-plus-square-o"></i>
                                    </a>
                                </span>
                            </h3>
                        </div>
                    </viewcolumn>
                </viewrow>
                <div id="collapsePreview" class="collapse show" data-toggle="collapse">
                    <viewrow>
                        <viewcolumn class="labels-form">
                            <div class="form-group row" style="margin-bottom:5px;">
                                <div class="input-group input-group-sm col-sm">
                                    <label class="col-sm col-form-label">@g["Label separator type"]</label>
                                    <select model name="FiberSeparatorType" no-transform class="form-control form-control-sm fiber-separator-type">
                                    </select>


                                    @*<button type="button" class="btn btn-sm btn-success float-right" action="click:PreviewEvent">@g["Show"]</button>*@
                                    @* <button type="button" class="btn btn-sm btn-success float-right" action="click:PreviewEventReset">@g["Reset"]</button>*@
                                </div>
                            </div>

                            <div class="form-group row" style="margin-bottom:5px;">
                                <div class="input-group input-group-sm col-sm">
                                    <label class="col-sm col-form-label">@g["Composition Compression"]</label>
                                    <input type="number" placeholder="0% to 100%" max="100" min="0" no-transform class="form-control form-control-sm fiber-label-size">
                                    <button type="button" class="btn btn-sm btn-success float-right" action="click:PreviewCompoEvt">@g["Apply"]</button>
                                </div>
                            </div>
                            <hr />
                            <div class="form-group row additional-compresion" style="margin-bottom:5px;">
                                <div class="input-group input-group-sm col-sm">
                                    <label class="col-sm col-form-label">@g["Additional Compression"]</label>
                                    <input type="number" placeholder="0% to 100%" max="100" min="0" no-transform class="form-control form-control-sm additional-label-size">
                                    <button type="button" class="btn btn-sm btn-success float-right" action="click:PreviewAdditionalEvt">@g["Apply"]</button>
                                </div>
                            </div>
                        </viewcolumn>
                    </viewrow>

                    <viewrow>
                        <viewcolumn>
                        @*    <button type="button" class="btn btn-sm btn-success float-right" action="click:LoadPreviewEvent">@g["Load Adjust"]</button>*@
                           
                            @*<button type="button" class="btn btn-sm btn-success float-right" action="click:SaveViewEvent">@g["Save Adjust"]</button>*@
                        </viewcolumn>
                    </viewrow>
                    <viewrow>
                        <viewcolumn>
                            <div class="form-group row" style="margin-bottom:5px;">
                                <div class="input-group input-group-sm col-sm">
                                    <div class="labels-container"></div>
                                </div>
                            </div>
                        </viewcolumn>
                    </viewrow>
                </div>

            </div>

            <!--         <input model name="CareInstruction[0].Instruction" value="" />       -->
            <div class="d-none" name="SortedCareInstructions"></div>


            <viewfooter>

                <div class="row justify-content-end" name="AvailableActions">
                    @*<div class="col-4 text-center">
                        <a href="#" class="btn btn-sm btn-outline-primary" action="Save"> <span class="fa fa-fw fa-save" aria-hidden="true"></span> @g["Save"]</a>
                    </div>*@
                    <div class="col text-right">
                        <a href="#" class="btn btn-sm btn-primary" action="SaveDefinitionStay">@g["Save"] <span class="fa fa-fw fa-chevron-right" aria-hidden="true"></span></a>
                        <a href="#" class="btn btn-sm btn-primary" action="SaveDefinition">@g["Save and Close"] <span class="fa fa-fw fa-chevron-right" aria-hidden="true"></span></a>
                    </div>
                </div>

            </viewfooter>

        </viewcard>
    </viewform>

</form>
